<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>NSXReturnThrowError: NSXReturnThrowError</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li id="current"><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<h1>NSXReturnThrowError</h1>
<p>
<a class="el" href="NSXReturnThrowError_8h.html">NSXReturnThrowError.h</a> Copyright (c) 2007 Jonathan 'Wolf' Rentzsch: &lt;<a href="http://rentzsch.com">http://rentzsch.com</a>&gt; Some rights reserved: &lt;<a href="http://opensource.org/licenses/mit-license.php">http://opensource.org/licenses/mit-license.php</a>&gt;<h2><a class="anchor" name="Overview">
Overview</a></h2>
NSXReturnThrowError does two things:<p>
1. Eases wrapping error codes into NSError objects.<p>
2. Enhances NSError by adding origin information to the error instance. Origin information includes the actual line of code that returned the error, as well as the file+line+function/method name.<p>
A big NSXReturnThrowError feature is that it deduces the correct NSError error domain based on the wrapped code's return type+value. Bonus: it does so without requiring ObjC++, relying on @encode acrobatics instead.<p>
NSXReturnThrowError was coded against 10.4, but should be compatibale with 10.3 as well. However that's currently untested.<h2><a class="anchor" name="Usage">
Usage</a></h2>
NSXReturnThrowError handles both types of error handling: explicit returning of NSError objects and raising NSExceptions.<p>
Use <a class="el" href="NSXReturnThrowError_8h.html#bf50d60654b53d3fdcf18f34dd3d2fbe">NSXReturnError()</a> if you're returning NSError objects explicitly:<p>
<div class="fragment"><pre class="fragment">        - (id)demoReturnError:(NSError**)error_ {
            <span class="keywordtype">id</span> result = nil;
            NSError *error = nil;
            
            <a class="code" href="NSXReturnThrowError_8h.html#bf50d60654b53d3fdcf18f34dd3d2fbe">NSXReturnError</a>(SomeCarbonFunction());
            <span class="keywordflow">if</span> (!error)
                <a class="code" href="NSXReturnThrowError_8h.html#bf50d60654b53d3fdcf18f34dd3d2fbe">NSXReturnError</a>(someposixfunction());
            <span class="keywordflow">if</span> (!error)
                <a class="code" href="NSXReturnThrowError_8h.html#bf50d60654b53d3fdcf18f34dd3d2fbe">NSXReturnError</a>(some_mach_function());
            <span class="keywordflow">if</span> (!error)
                <a class="code" href="NSXReturnThrowError_8h.html#bf50d60654b53d3fdcf18f34dd3d2fbe">NSXReturnError</a>([SomeCocoaClass newObject]);
            
            <span class="keywordflow">if</span> (error_) *error_ = error;
            <span class="keywordflow">return</span> result;
        }
</pre></div><p>
Use <a class="el" href="NSXReturnThrowError_8h.html#8448c530ed02fd8581062129f8540123">NSXThrowError()</a> if you'd prefer to raise NSException objects:<p>
<div class="fragment"><pre class="fragment">        - (id)demo {
            <span class="keywordtype">id</span> result = nil;
            
            <a class="code" href="NSXReturnThrowError_8h.html#8448c530ed02fd8581062129f8540123">NSXThrowError</a>(SomeCarbonFunction());
            <a class="code" href="NSXReturnThrowError_8h.html#8448c530ed02fd8581062129f8540123">NSXThrowError</a>(someposixfunction());
            <a class="code" href="NSXReturnThrowError_8h.html#8448c530ed02fd8581062129f8540123">NSXThrowError</a>(some_mach_function());
            <a class="code" href="NSXReturnThrowError_8h.html#8448c530ed02fd8581062129f8540123">NSXThrowError</a>([SomeCocoaClass newObject]);
            
            <span class="keywordflow">return</span> result;
        }
</pre></div><p>
The current structure of the raised NSException object is that it's a normal NSException whose name is "NSError". The actual error object is hung off the exception's userInfo dictionary with the key of @"error".<p>
<dl compact><dt><b><a class="el" href="bug.html#_bug000001">Bug:</a></b></dt><dd>I bet this breaks on 10.5. Hopefully not beyond repair. </dd></dl>
<dl compact><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>Add a compile-time flag for whether to stuff __FILE__+friends info into the generated NSError or not.</dd></dl>
<hr size="1"><address style="align: right;"><small>Generated on Sun Jan 7 01:16:06 2007 for NSXReturnThrowError by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
